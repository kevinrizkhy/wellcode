{{define "content"}}
<link rel="stylesheet" href="{{.BaseURL}}assets/css/bower_components/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="{{.BaseURL}}assets/css/bower_components/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="{{.BaseURL}}assets/css/bower_components/morris.js/morris.css">
<link rel="stylesheet" href="{{.BaseURL}}assets/dist/css/AdminLTE.min.css">
<link rel="stylesheet" href="{{.BaseURL}}assets/css/bower_components/select2/dist/css/select2.min.css">
<link rel="stylesheet" href="{{.BaseURL}}assets/css/bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css">
<link rel="stylesheet" href="{{.BaseURL}}assets/dist/css/skins/_all-skins.min.css">
<script src="{{.BaseURL}}assets/css/bower_components/raphael/raphael.min.js"></script>
<script src="{{.BaseURL}}assets/css/bower_components/morris.js/morris.min.js"></script>
<script src="{{.BaseURL}}assets/css/bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="{{.BaseURL}}assets/css/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<link rel='stylesheet prefetch' href='https://fonts.googleapis.com/icon?family=Material+Icons'>
<script src="{{.BaseURL}}assets/css/bower_components/select2/dist/js/select2.full.min.js"></script>
<script>
  $(function () {
    $('.select2').select2()
  })
</script>
<script>
  $( document ).ready(function() {
    setup();
  });
  var results;
  function setup() {
    $.ajax({
      type: "GET",
      url: "{{.BaseURL}}getJSON/statuseditprofileAdmin/pending",
      success: function(result)
      {
        $('#title').html("Daftar Pengajuan Perubahan Data Profil ");
        $('#example1').DataTable({
          data: result,
          destroy: true,
          "scrollX" : true;
          columns:[{title:"Nama Perusahaan"},{title:"Email"},{title:"Tanggal Pengajuan"},{title:"Status"},{title:""}]
        });
      }
    });
  }
  function changeType(){
    var types = $("#types option:selected").text();
    if(types=="Semua"){
      types="all";
    }else if(types=="Disetujui"){
      types="approve";
    }else if (types=="Ditolak"){
      types="reject";
    }else{
      types="pending";
    }
    $.ajax({
      type: "GET",
      url: "{{.BaseURL}}getJSON/statuseditprofileAdmin/"+types,
      success: function(result)
      {
        $('#title').html("Daftar Pengajuan Perubahan Data Profil");
        if(result==null){
          var table = $('#example1').DataTable();
          table.clear().draw();
        }else{
          $('#example1').DataTable({
            data: result,
            destroy: true,
            "scrollX":true;
            columns:[{title:"Nama Perusahaan"},{title:"Email"},{title:"Tanggal Pengajuan"},{title:"Status"},{title:"Status"}]
          });
        }
      }
    });
  }
</script>
<div id="wrapper" class="container" style="padding-top: 0;overflow: auto;">
  <div style="margin: 0 auto; ">
    <div class="col-xs-12"  style="padding: 25px 0 0 0; display: inline-block; ">
      <button id="backButton" style="margin-top: 0; float: left; display: none; background-color: #357ca5 !important;color: white !important;" type="button" class="btn btn-default" onclick="back()">
        <i class="fa fa-arrow-left" aria-hidden="true"></i>&nbsp&nbspKembali
      </button>
      <div style="text-align: center;"> 
        <b><h3 class="profile-username text-center" style="font-size: 25px; padding-bottom: 10px;" id="title"></h3></b>
      </div>
    </div>
    <div class="col-md-offset-4 col-md-4" style="padding-bottom: 20px;" id="dropdownRole">
      <select id="types" name="types" class="form-control select2" onchange="changeType()" style="width: 100%;" required>
        <option value="all" >Semua</option>
        <option value="pending" selected>Menunggu Persetujuan</option>
        <option value="approve" >Disetujui</option>
        <option value="reject" >Ditolak</option>
      </select>
    </div>
    <div class="col-xs-12" style="display: block;" id="list">
      <div class="box">
        <div class="box-body">
          <table id="example1" class="hover table table-bordered table-striped" style="width:100%">
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="alert alert-success " style="z-index: 99;position: absolute; top: 0; left: 50%; margin-top: 10px; margin-left: -150px; display: none; width: 300px; text-align: center;" id="alertSuccess">
  <strong>Berhasil!</strong> Perubahan data telah disimpan.
</div>
<div class="alert alert-warning" style="z-index: 99;position: absolute; top: 0; left: 50%; margin-top: 10px; margin-left: -150px; display: none; width: 300px; text-align: center;" id="alertWarning">
  <strong>Perhatian!</strong><br>Harap memilih Sales untuk Distributor.
</div>
<div class="alert alert-danger" style="z-index: 99;position: absolute; top: 0; left: 50%; margin-top: 10px; margin-left: -150px; display: none; width: 300px; text-align: center;" id="alertDanger">
  <strong>Gagal!</strong> Perubahan data gagal disimpan.
</div>
{{end}}